<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <title>PublicCMS VUE Template</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link href="${site.sitePath}assets/css/style.css" rel="stylesheet">
        <script src="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/vue-resource"></script>
    </head>
    <body>
        <div id="app">
            <header class="header">
                <div class="top-bar">
                    <div class="container">
                        <a>{{ message }}</a>
                    </div>
                </div>
                <div class="container clearfix-after">
                    <a href="#" class="nav-icon"></a>
                    <div class="logo">
                        <a v-bind:href="sitePath+'vue.html'"><img v-bind:src="sitePath+'assets/images/logo.png'" v-if="sitePath !== ''" alt="Public CMS"></a>
                    </div>
                </div>
                <nav>
                    <ul class="container clearfix-after">
                        <li>
                            <a v-bind:href="sitePath+'vue.html'">Home</a>
                        </li>
                        <li v-for="category in categoryList">
                            <a v-bind:href="category.url">{{ category.name }}</a>
                        </li>
                    </ul>
                </nav>
            </header>
            <main>
                <div class="container">
                    <div id="index-focus" class="swiper-container">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"  v-for="focus in focusList"><a v-bind:href="focus.url"><img  v-bind:src="focus.cover" v-bind:alt="focus.title"></a></div>
                        </div>
                        <div class="swiper-pagination swiper-pagination-white"></div>
                    </div>
                    <div class="data-list">
                        <ul>
                            <li v-for="content in contentList" class="clearfix-after">
                                <a v-if="content.cover !== ''" v-bind:href="content.url">
                                    <figure><img v-bind:src="content.cover" v-bind:alt=" content.title "/></figure>
                                </a>
                                <div class="article-title">
                                    <h3><a v-bind:href="content.url">{{ content.title }}</a></h3>
                                    <p>{{ content.description }}</p>
                                    <p class="info">
                                        <span><a v-bind:href="content.url+'#comments'">{{ content.comments}}评论</a></span>
                                        <span><a v-bind:href="dynamicPath+'comment.html?contentId='+content.id">{{ content.scores}}赞</a></span>
                                        <span>{{ content.publishDate}}</span>
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </main>
            <footer>
                <div class="container">
                    <div class="footer-bottom">
                        <p>Powered by <a href="http://www.publiccms.com/">Public CMS</a> </p>
                    </div>
                </div>
            </footer>
        </div>
        <script src="${site.sitePath}assets/swiper/swiper.min.js"></script>
        <script src="${site.sitePath}assets/js/cms.analytics.js"></script>
        <script>
            var app = new Vue({
                el: '#app',
                data: {
                    message: 'Hello Vue.js!',
                    title:'',
                    sitePath:'',
                    dynamicPath:'',
                    categoryList: [],
                    contentList:[]
				},
                created:function(){
                    console.log('created');
                    this.$http.get("${site.dynamicPath}json/hello.json").then(function(data){
                        var temp=eval('('+data.bodyText+')');
                        this.message=temp.message;
                        this.sitePath=temp.sitePath;
                        this.dynamicPath=temp.dynamicPath;
                        document.title=temp.siteName;
                    });
                    this.$http.get("${site.dynamicPath}json/categoryList.json").then(function(data){
                        this.categoryList=eval('('+data.bodyText+')');
                    });
                    this.$http.get("${site.dynamicPath}json/contentList.json?pageSize=10").then(function(data){
                        this.contentList=eval('('+data.bodyText+')');
                    });

                },
                mounted:function(){
                    console.log('mounted');
                },
                updated:function(){
                    console.log('updated');
                }
            });
        </script>
        <script>
            <@_sysConfigData code="site">${(object.statistics?no_esc)!}</@_sysConfigData>
        </script>
        <script>
            cmsAnalytics().report('${site.dynamicPath}api/visit/record');
        </script>
    </body>